{
  "openapi": "3.0.3",
  "info": {
    "title": "DSMF",
    "description": "A simple API to interact with the Domain Slice Management Function. Supports reserving, creating and removing slices from one external domain to another external domain or host. Please refer to the topology drawings for further information about the network structures.",
    "version": "1.0.0"
  },
  "components": {
    "schemas": {
      "slice": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32",
            "description": "The slice identifier"
          },
          "rate": {
            "type": "integer",
            "format": "int64",
            "description": "The transmission rate as bits/s"
          },
          "latency": {
            "type": "integer",
            "format": "int16",
            "description": "The required maximum latency"
          },
          "from": {
            "type": "string",
            "description": "The name of the input domain or host"
          },
          "to": {
            "type": "string",
            "description": "The name of the output domain or host"
          }
        }
      }
    }
  },
  "paths": {
    "/auth": {
      "summary": "Manages authentication towards this service",
      "description": "Endpoint to manage authentication tokens",
      "put": {
        "tags": ["Authentication"],
        "description": "Issues a new authentication token in exchange for credentials. Currently requires no credentials, this is up to future implementations.",
        "parameters": [
        ],
        "responses": {
          "200": {
            "description": "The authentication token as string",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "403": {
            "description": "Wrong credentials were specified"
          }
        }
      }
    },
    "/reservation": {
      "summary": "Manages slice reservations on the current domain",
      "description": "Endpoint to manage slice reservations",
      "get": {
        "tags": ["Slice Reservation"],
        "description": "Lists all current slice reservations",
        "parameters": [
          {
            "name": "auth",
            "in": "query",
            "description": "The authentication token issued by prior login",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The current list of slice reservations",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/slice"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Invalid authentication provided"
          }
        }
      },
      "put": {
        "tags": ["Slice Reservation"],
        "description": "Creates a new slice reservation",
        "parameters": [
          {
            "name": "auth",
            "in": "query",
            "description": "The authentication token issued by prior login",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "slice",
            "in": "query",
            "description": "The slice to reserve. Will check for issues.",
            "required": true,
            "schema": {
              "$ref": "#/components/schemas/slice"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The slice has been reserved"
          },
          "403": {
            "description": "Invalid authentication provided"
          },
          "404": {
            "description": "The input or output could not be found"
          },
          "409": {
            "description": "A slice with this id is already known"
          },
          "507": {
            "description": "Insufficient resources"
          }
        }
      },
      "delete": {
        "tags": ["Slice Reservation"],
        "description": "Deletes a slice reservation",
        "parameters": [
          {
            "name": "auth",
            "in": "query",
            "description": "The authentication token issued by prior login",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "id",
            "in": "query",
            "description": "The id of the slice reservation to be deleted.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The slice reservation was successfully deleted."
          },
          "403": {
            "description": "Invalid authentication provided."
          },
          "404": {
            "description": "The slice reservation could not be found."
          }
        }
      }
    },
    "/slice": {
      "summary": "Manages slices on the current domain",
      "description": "Endpoint to manage slices",
      "get": {
        "tags": ["Slice Management"],
        "description": "Lists all current slices",
        "parameters": [
          {
            "name": "auth",
            "in": "query",
            "description": "The authentication token issued by prior login",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The current list of slices",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/slice"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Invalid authentication provided"
          }
        }
      },
      "put": {
        "tags": ["Slice Management"],
        "description": "Creates a new slice from a reservation",
        "parameters": [
          {
            "name": "auth",
            "in": "query",
            "description": "The authentication token issued by prior login",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "id",
            "in": "query",
            "description": "The slice to create from the corresponding reservation id",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The slice has been created"
          },
          "403": {
            "description": "Invalid authentication provided"
          },
          "404": {
            "description": "The slice reservation could not be found."
          },
          "500": {
            "description": "The deployment to the network failed"
          }
        }
      },
      "delete": {
        "tags": ["Slice Management"],
        "description": "Deletes a slice",
        "parameters": [
          {
            "name": "auth",
            "in": "query",
            "description": "The authentication token issued by prior login",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "id",
            "in": "query",
            "description": "The id of the slice to be deleted.",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The slice was successfully deleted."
          },
          "403": {
            "description": "Invalid authentication provided."
          },
          "404": {
            "description": "The slice could not be found."
          }
        }
      }
    }
  }
}
